# Â© Copyright IBM Corporation 2015, 2016
# Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License.
# You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0. Unless required by applicable law or agreed
# to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF 
# ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
#
# WARNING: This file is auto-generated by the build.sh script

FROM ubuntu:16.04

# The URL to download the MQ installer from in tar.gz format
ARG MQ_URL=http://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/messaging/mqadv/mqadv_dev901_linux_x86-64.tar.gz

# The MQ packages to install
ARG MQ_PACKAGES="MQSeriesRuntime-*.rpm MQSeriesServer-*.rpm MQSeriesMsg*.rpm MQSeriesJava*.rpm MQSeriesJRE*.rpm MQSeriesGSKit*.rpm MQSeriesClient-*.rpm MQSeriesMan-*.rpm MQSeriesSamples-*.rpm"

RUN export DEBIAN_FRONTEND=noninteractive   && echo "mq:9.01" > /etc/debian_chroot   && apt-get update -y   && apt-get install -y --no-install-recommends     bash     bc     coreutils     curl     debianutils     findutils     gawk     grep     libc-bin     mount     passwd     procps     rpm     sed     tar     netcat     net-tools     iputils-ping     util-linux   && mkdir -p /tmp/mq   && cd /tmp/mq   && curl -LO $MQ_URL   && tar -zxvf ./*.tar.gz   && groupadd --gid 1000 mqm   && usermod -G mqm root   && useradd --uid 1000 --gid mqm --home-dir /var/mqm mqperf   && echo "mqperf:password" | chpasswd   && cd /tmp/mq/MQServer   && ./mqlicense.sh -text_only -accept   && rpm -ivh --force-debian $MQ_PACKAGES   && /opt/mqm/bin/setmqinst -p /opt/mqm -i   && rm -rf /tmp/mq   && rm -rf /var/lib/apt/lists/*
